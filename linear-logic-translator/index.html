<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- CSS -->
    <link rel="stylesheet" href="../bower_components/semantic/dist/semantic.min.css">

    <title>Linear Logic Translator</title>
</head>
<body>

	<div style="margin-top: 50px"></div>
	
	<div class="ui container">
		<div class="ui center aligned grid">

			<div class="row">
				<div class="two wide column">
					<div class="ui input fluid">
						<input type="text" placeholder="rule" id="rule_connective">
					</div>
				</div>
				<div class="ten wide column"></div>
			</div>
			
			<div class="row" style="margin-top: -15px">
				<div class="six wide column">
					<div class="ui input fluid">
						<input type="text" placeholder="premise (optional)" id="premise-1">
					</div>
				</div>

				<div class="six wide column">
					<div class="ui input fluid">
						<input type="text" placeholder="premise (optional)" id="premise-2">
					</div>
				</div>
			</div>

			<div class="row">
				<div class="twelve wide column" style="margin-top: -15px">
					<div class="ui input fluid">
						<input type="text" placeholder="conclusion" id="conclusion">
					</div>
				</div>
			</div>
			

			<div class="row">

				<div class="twelve wide column">
					<button class="ui primary button right floated" onclick="preview()">Preview</button>
				</div>
			</div>
			
			<!-- Symbol Table -->
			<div class="row">
				
			<div class="twelve wide column">
				<div id="rule"></div>
				<div id="table"></div>
			</div>
			</div>
			
		</div>
	</div>

	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="../bower_components/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../bower_components/jquery/dist/jquery.slim.min.js"></script>
    <script src="../bower_components/semantic/dist/semantic.min.js"></script>
    <script src="rule_preview.js"></script>
    <script src="table.js"></script>
	
	<script type="text/javascript">
		
		//getting the values from the input fields
		function getValues () {

			var premise1 = $("#premise-1").val();
			var premise2 = $("#premise-2").val();
			var conclusion = $("#conclusion").val();

			return [premise1, premise2, conclusion];
		}

		// remove commas and extra spaces fromt a sequent and replace them with a single space
		function removeCommaHelper(sequent) {
			sequent = sequent.replace(/,/g, " ");
			sequent = sequent.replace(/ +/g, " ");
			sequent = (sequent.length != 0) ? sequent.split(" ")  : [];
			return sequent.filter(function (elem) { return elem != ""; });
		}

		// remove commas and spaces from a list of sequents and rplaces them with one single space
		function removeCommas (seq_list) {
			return seq_list.map(removeCommaHelper); 
		}

		// removing duplicates and spaces
		function removeDuplicatesHelper(seq) {
			var unique_seq = Array.from(new Set(seq))
			unique_seq = unique_seq.filter (function (elem) { return elem != " "; });
		    return unique_seq
		}

		// removing duplicates from a list of sequents
		function removeDuplicates(seq_list) {
			return seq_list.map(removeDuplicatesHelper);
		}

		// get the uniques symbols used in all the sequents
		function getSequentSymbols () {
			var sequents = getValues();
			sequents = removeCommas(sequents);
			sequents = sequents.filter(function (elem) { return elem.length != 0; });
			var symbols = removeDuplicates(sequents);
			symbols = [].concat.apply([], sequents);
			symbols = removeDuplicatesHelper(symbols);
			console.log(sequents);
			return [sequents, symbols];
		}

		// generating the symbol table
		function preview() {
			var symbols = getSequentSymbols()[1];
			rule_preview();
			table(symbols);
		}



	</script>

</body>
</html>